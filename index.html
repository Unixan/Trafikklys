<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
</head>

<body class="body">
    <div id="app" class="main"></div>
    <script>
        //Model
        let topColor = 'noLight';
        let middleColor = 'noLight';
        let bottomColor = 'noLight';
        let automation = 'autoLight()';
        let automationText = 'Auto';
        //View
        view();
        function view() {
            document.getElementById("app").innerHTML = /*HTML*/`
                <div class="house">
                    <div id="red" class="lights ${topColor}"></div>    
                    <div id="yellow" class="lights ${middleColor}"></div>    
                    <div id="red" class="lights ${bottomColor}"></div>    
                </div>
                <div class="buttons">
                    <div class="button" onclick="redLight()">Stopp!</div>
                    <div class="button" onclick="changeLight()">Bytt!</div>
                    <div class="button" onclick="greenLight()">Kj√∏r!</div>
                    <div class="button" onclick="toRedLight()">Stopp snart!</div>
                    <div class="button" onclick="${automation}">${automationText}</div>

                </div>
            
    `
        }
        //Controller
        function redLight() {
            topColor = 'redLight';
            middleColor = 'noLight';
            bottomColor = 'noLight';
            view();
        }
        function changeLight() {
            topColor = 'redLight';
            middleColor = 'yellowLight';
            bottomColor = 'noLight';
            view();
        }
        function greenLight() {
            topColor = 'noLight'
            middleColor = 'noLight';
            bottomColor = 'greenLight';
            view();
        }
        function toRedLight() {
            topColor = 'noLight'
            middleColor = 'yellowLight';
            bottomColor = 'noLight';
            view();
        }
        function autoLight() {
            if (automationText == 'Auto' && automation == 'autoLight()') {
                automationText = 'Avbryt'
                automation = 'cancelAutoLight()'
            }
            redLight();
            setTimeout(changeLight, 5000);
            setTimeout(greenLight, 7000);
            setTimeout(toRedLight, 12000);
            setTimeout(autoLight, 17000);

            view();
        }
    </script>
</body>

</html>